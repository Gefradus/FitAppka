@model IEnumerable<FitAppka.Models.Dzien>

    <head>
        <link rel="stylesheet" href="~/css/Home.css" type="text/css">
        <link href="~/css/AllViews.css" rel="stylesheet" />
        <link href="~/css/FindDay.css" rel="stylesheet" />
        <script src="~/lib/jquery/dist/jquery.min.js"></script>
        <link href="~/chosen/chosen.min.css" rel="stylesheet" />
        <script src="~/js/chosen.jquery.min.js"></script>
        <script src="~/js/FindDay.js"></script>
        <script type="text/javascript">
            function szukaj(typSzukan) {
                szukajDnia(typSzukan, '@Html.Raw(@Url.Action("FindDay", "FindDay", new { od = "_od_", produktID = "_id_", dO = "_dO_", typSzukania = "_typ_" }))');
            }

            function przejdz(dzienID, klientID) {
                var url = '@Html.Raw(@Url.Action("Powrot", "Posilek", new { dzienID = "_dzienID_", klientID = "_klientID_" }))';
                window.location.href = url.replace('_dzienID_', dzienID).replace('_klientID_', klientID);
            }

            function przywrocStan() {
                przywroc(@ViewData["typSzukania"]);
            }

            function kolorujDrugiWiersz() {
                var wszystkie = document.getElementsByClassName("dzienWiersz");
                for (var i = 0; i < wszystkie.length; i++) {
                    if (i % 2 == 0) {
                        wszystkie[i].style.backgroundColor = "rgb(224, 221, 221)";
                    }
                }
            }
        </script>
    </head>

<body onload="zaladuj()">

    <header>
        <nav class="navbar navbar-dark navbar-expand-md border-bottom mb-3 czarnyNav" style="text-align: center">

            <div id="lewa">
                <div class="mr-auto mt-3">
                    <a class="nav-link ml-sm-3 ml-md-4 ml-lg-5 mt-2 mt-md-0" asp-controller="Posilek" asp-action="Start" asp-route-id="@ViewData["klientID"]"><img style="height: 50px; width:185px; margin-top: -15px" src="~/img/logorozowe.png" /></a>
                </div>
            </div>
            <div>
                <div id="prawa" class="navbar-nav ml-auto">
                    <button class="navbar-toggler mr-2 mr-sm-3" data-toggle="collapse" data-target="#navMenu" aria-controls="navMenu" aria-expanded="false" aria-label="Przełącznik nawigacji" type="button">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="d-none d-md-inline-block mr-md-5">
                        <div class="mr-md-4 mr-lg-5 fl"><a class="nav-link text-light" asp-controller="Training" asp-action="TrainingPanel" asp-route-dzienID="@ViewData["dzienID"]">Treningi </a></div>
                        <div class="mr-md-4 mr-lg-5 fl"><a class="nav-link text-light" asp-controller="FindDay" asp-action="FindDay">Szukaj dni <img style="height: 15px; width:15px" src="~/img/search.png" /></a></div>
                        <div class="mr-md-4 mr-lg-5 fl"><a class="nav-link text-light" asp-controller="Settings" asp-action="Settings">Ustawienia <img style="height: 15px; width:15px" src="~/img/settings.png" /></a></div>
                        <div class="fl"><a class="nav-link text-light" asp-controller="Login" asp-action="Logout">Wyloguj się <img style="height: 15px; width:15px" src="~/img/logout.png" /></a></div>
                        <div class="cb"></div>
                    </div>
                </div>
            </div>
        </nav>
        <div class="collapse navbar-collapse in d-md-none" id="navMenu">

            <ul class="navbar-nav">
                <li>
                    <a class="nav-link text-dark" asp-controller="Training" asp-action="TrainingPanel" asp-route-dzienID="@ViewData["dzienID"]">Treningi</a>
                </li>
                <li>
                    <a class="nav-link text-dark" asp-controller="FindDay" asp-action="FindDay">Szukaj dni</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" asp-controller="Settings" asp-action="Settings">Ustawienia</a>
                </li>
                <li>
                    <a class="nav-link text-dark" asp-controller="Login" asp-action="Logout">Wyloguj się</a>
                </li>
            </ul>
        </div>
        <nav class="navbar navbar-expand-md border-bottom cent" id="navGlowny">
            <div style="margin-top: -15px">
                <div style="font-size:12px; margin-right: 10px; margin-bottom: 2px;">Szukaj dni gdzie:</div>
                <div>
                    <select id="wybor" onchange="wybor()">
                        <option value="1">Spożyto dany posiłek</option>
                        <option value="2">Spożycie kalorii wyniosło</option>
                        <option value="3">Spożycie płynów wyniosło</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>



    <div class="container" style="margin-top: 100px">
        <!-----------------------------------------------SZUKANIE PO PRODUKTACH--------------------------------------------------->
        <div class="row no-gutters" id="produkt">
            <div class="container">
                <div class="row no-gutters">
                    <nav id="navProdukt" class="navbar navbar-expand-md border-bottom cent navSzukaj">
                        <div id="panelek">
                            <div id="chosenPanel">
                                <div style="font-size: 12px">Wybierz produkt:</div>
                                @Html.DropDownList("Produkt", (List<SelectListItem>)ViewData["allProducts"], new { id = "normalDropDown" })
                            </div>
                            <div id="panelGramatury">
                                <div style="font-size: 12px">Przedział wagi produktu (*opcjonalne):</div>
                                <div class="oddodiv">*Od: </div>
                                <input id="odProdukt" class="oddo" type="number" value="@ViewData["od"]" />
                                <div class="g1">g</div>
                                <div class="oddodiv">*Do: </div>
                                <input id="doProdukt" class="oddo" type="number" value="@ViewData["do"]" />
                                <div class="g2">g</div>
                                <div class="cb"></div>
                            </div>
                            <div class="cent cb" style="padding-top: 20px"><button class="szukajBtn" type="button" onclick="szukaj(1)">Szukaj <img style="height: 15px; width:15px" src="~/img/search.png" /></button></div>
                        </div>
                    </nav>
                </div>

                @if ((bool)ViewData["czyZnaleziono"] && (int)ViewData["typSzukania"] == 1)
                {
                    <div id="ctxProd" class="row no-gutters">
                        <div class="container">
                            <div class="row no-gutters naglowekDni">
                                <div class="col-4 cent" style="margin-left: -17px; margin-right: 17px">
                                    Dzień
                                </div>
                                <div class="col-4 cent iloscPro">
                                    Ilość produktu
                                </div>
                                <div class="col-4 cent">
                                    Przejdź do dnia
                                </div>
                            </div>
                        </div>
                    </div>
                }

                <div class="row no-gutters" style="font-weight: 600">
                    @if ((bool)ViewData["czyZnaleziono"] && (int)ViewData["typSzukania"] == 1)
                    {
                        <div class="container" style="border-bottom: 1px solid darkgray">

                            @{
                                List<int> listaGramatur = (List<int>)ViewData["listaGramatur"];
                                int ileDniWypisano = 0;

                                foreach (var dzienID in (List<int>)ViewData["dniID"])
                                {
                                    foreach (var item in Model)
                                    {
                                        if (item.DzienId == dzienID)
                                        {
                                            <div class="row no-gutters dzienWiersz">
                                                <div class="col-4 cent">
                                                    @{ var dayOfYear = item.Dzien1.Value; }
                                                    @dayOfYear.ToString("dd/MM/yyyy")
                                                </div>
                                                <div class="col-4 cent">
                                                    @listaGramatur[ileDniWypisano] g
                                                </div>
                                                <div class="col-4 cent">
                                                    <button type="button" onclick="przejdz('@item.DzienId', '@item.KlientId')" style="background-color: #636363"><img src="~/img/logout.png" width="30" height="30"></button>
                                                </div>
                                            </div>
                                            ileDniWypisano++;
                                        }
                                    }
                                }
                            }
                        </div>
                    }
                    @if (!(bool)ViewData["czyZnaleziono"] && (int)ViewData["typSzukania"] == 1)
                    {
                        <div class="cent" id="nieZnalProd">Nie znaleziono dni</div>
                    }

                </div>
            </div>
        </div>

        <!-----------------------------------------------SZUKANIE PO KALORIACH--------------------------------------------------->
        <div id="kalorie" style="width: 100%" hidden>
            <div class="container">
                <div class="row no-gutters">
                    <nav class="navbar navbar-expand-md border-bottom cent navSzukaj">
                        <div>
                            <div style="float: left; margin-right: 15px; margin-left:15px">
                                <div style="font-size:12px; margin-bottom: 2px">Przedział spożytych kalorii (*opcjonalne):</div>
                                <div class="oddodiv">*Od: </div>
                                <input id="odKalorie" class="oddo" type="number" value="@ViewData["od"]" />
                                <div class="g1">kcal</div>
                                <div class="oddodiv">*Do: </div>
                                <input id="doKalorie" class="oddo" type="number" value="@ViewData["do"]" />
                                <div class="g2">kcal</div>
                                <div class="cb"></div>
                            </div>
                            <div class="cent cb" style="padding-top: 20px"><button class="szukajBtn" type="button" onclick="szukaj(2)">Szukaj <img style="height: 15px; width:15px" src="~/img/search.png" /></button></div>
                        </div>
                    </nav>
                </div>
                @if ((bool)ViewData["czyZnaleziono"] && (int)ViewData["typSzukania"] == 2)
                {
                    <div class="row no-gutters" style="margin-top: 100px;">
                        <div class="container">
                            <div class="row no-gutters naglowekDni">
                                <div class="col-4 cent" style="margin-left: -17px; margin-right: 17px">
                                    Dzień
                                </div>
                                <div class="col-4 cent iloscPro">
                                    Spożyte kalorie
                                </div>
                                <div class="col-4 cent">
                                    Przejdź do dnia
                                </div>
                            </div>
                        </div>
                    </div>
                }
                <div class="row no-gutters" style="font-weight: 600">
                    @if ((bool)ViewData["czyZnaleziono"] && (int)ViewData["typSzukania"] == 2)
                    {
                        <div class="container" style="border-bottom: 1px solid darkgray">

                            @{
                                List<decimal> listaKcal = (List<decimal>)ViewData["listaKcal"];
                                int ileDniWypisano = 0;

                                foreach (var dzienID in (List<int>)ViewData["dniID"])
                                {
                                    foreach (var item in Model)
                                    {
                                        if (item.DzienId == dzienID)
                                        {
                                            <div class="row no-gutters dzienWiersz">
                                                <div class="col-4 cent">
                                                    @{ var dayOfYear = item.Dzien1.Value; }
                                                    @dayOfYear.ToString("dd/MM/yyyy")
                                                </div>
                                                <div class="col-4 cent">
                                                    @listaKcal[ileDniWypisano] kcal
                                                </div>
                                                <div class="col-4 cent">
                                                    <button type="button" onclick="przejdz('@item.DzienId', '@item.KlientId')" style="background-color: #636363"><img src="~/img/logout.png" width="30" height="30"></button>
                                                </div>
                                            </div>
                                            ileDniWypisano++;
                                        }
                                    }
                                }
                            }
                        </div>
                    }
                    @if (!(bool)ViewData["czyZnaleziono"] && (int)ViewData["typSzukania"] == 2)
                    {
                        <div class="cent" style="margin-top: 125px; width: 100%">Nie znaleziono dni</div>
                    }
                </div>
            </div>
        </div>
        <!-----------------------------------------------SZUKANIE PO WODZIE--------------------------------------------------->
        <div id="plyny" style="width: 100%" hidden>
            <div class="container">
                <div class="row no-gutters">
                    <nav class="navbar navbar-expand-md border-bottom cent navSzukaj">
                        <div>
                            <div style="float: left; margin-right: 15px; margin-left:15px">
                                <div style="font-size:12px; margin-bottom: 2px">Przedział spożytych płynów (*opcjonalne):</div>
                                <div class="oddodiv">*Od: </div>
                                <input id="odWoda" class="oddo" type="number" value="@ViewData["od"]" />
                                <div class="g1">ml</div>
                                <div class="oddodiv">*Do: </div>
                                <input id="doWoda" class="oddo" type="number" value="@ViewData["do"]" />
                                <div class="g2">ml</div>
                                <div class="cb"></div>
                            </div>
                            <div class="cent cb" style="padding-top: 20px"><button class="szukajBtn" type="button" onclick="szukaj(3)">Szukaj <img style="height: 15px; width:15px" src="~/img/search.png" /></button></div>
                        </div>
                    </nav>
                </div>
                @if ((bool)ViewData["czyZnaleziono"] && (int)ViewData["typSzukania"] == 3)
                {
                    <div class="row no-gutters" style="margin-top: 100px;">
                        <div class="container">
                            <div class="row no-gutters naglowekDni">
                                <div class="col-4 cent" style="margin-left: -17px; margin-right: 17px">
                                    Dzień
                                </div>
                                <div class="col-4 cent iloscPro">
                                    Spożyte płyny
                                </div>
                                <div class="col-4 cent">
                                    Przejdź do dnia
                                </div>
                            </div>
                        </div>
                    </div>
                }
                <div class="row no-gutters" style="font-weight: 600">
                    @if ((bool)ViewData["czyZnaleziono"] && (int)ViewData["typSzukania"] == 3)
                    {
                        <div class="container" style="border-bottom: 1px solid darkgray">

                            @{
                                List<int?> listaMl = (List<int?>)ViewData["listaMl"];
                                int ileDniWypisano = 0;

                                foreach (var dzienID in (List<int>)ViewData["dniID"])
                                {
                                    foreach (var item in Model)
                                    {
                                        if (item.DzienId == dzienID)
                                        {
                                            <div class="row no-gutters dzienWiersz">
                                                <div class="col-4 cent">
                                                    @{ var dayOfYear = item.Dzien1.Value; }
                                                    @dayOfYear.ToString("dd/MM/yyyy")
                                                </div>
                                                <div class="col-4 cent">
                                                    @listaMl[ileDniWypisano] ml
                                                </div>
                                                <div class="col-4 cent">
                                                    <button type="button" onclick="przejdz('@item.DzienId', '@item.KlientId')" style="background-color: #636363"><img src="~/img/logout.png" width="30" height="30"></button>
                                                </div>
                                            </div>
                                            ileDniWypisano++;
                                        }
                                    }
                                }
                            }
                        </div>
                    }
                    @if (!(bool)ViewData["czyZnaleziono"] && (int)ViewData["typSzukania"] == 3)
                    {
                        <div class="cent" style="margin-top: 125px; width: 100%">Nie znaleziono dni</div>
                    }
                </div>
            </div>
        </div>
    </div>
    <script>
        kolorujDrugiWiersz();
    </script>
</body>

