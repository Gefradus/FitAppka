@model List<FitAppka.Models.ActiveDietDTO>
<html>
<head>
    <link href="~/css/Home.css" rel="stylesheet" />
    <link href="~/css/AllViews.css" rel="stylesheet" />
    <link href="~/css/MyDiets.css" rel="stylesheet" />
    <script src="~/js/AllViews.js"></script>
    <script src="~/js/ShowNavbar.js"></script>
    <script src="~/js/MyDiets.js"></script>
</head>
<body onload="onload()">
    <div class="container">
        <div class="modal fade" tabindex="-1" id="deleteModal" data-keyboard="false" style="margin-top: 100px; padding-left: 15px">
            <div class="modal-dialog cent">
                <div class="modal-content">
                    <div class="modal-header" style="height: 20px">
                        <button type="button" class="close" data-dismiss="modal" style="margin-top: -30px">×</button>
                    </div>
                    <div class="modal-body">
                        <div style="margin-top: -10px;">
                            <label>Czy na pewno chcesz usunąć tę dietę?</label>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div class="cent">
                            <button type="button" data-dismiss="modal" class="cancelBtn">Anuluj</button>
                            <button type="button" id="delete" class="deleteBtn">Tak, usuń</button>
                            <input type="hidden" id="DietId" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        @if(Model.Count > 0){ 
            <div class="row no-gutters" id="columnsHeader">
                <div class="col-10 row no-gutters">
                    <div class="col-4 acent pl-2 pl-md-3 pl-md-4 pl-lg-5">Nazwa diety</div>
                    <div class="col-2 cent acent">Aktywna</div>
                    <div class="col-2 cent acent">Łączna kaloryczność</div>
                    <div class="col-4 cent acent">Zaplanowane dni</div>
                </div>
            </div>

            @foreach (var item in Model)
            {
                var d = item.Diet;
                <div class="row no-gutters tableRow">
                    <div class="col-10 row no-gutters">
                        <div class="col-4 acent pl-2 pl-md-3 pl-md-4 pl-lg-5">@d.DietName</div>
                        <div class="col-2 cent acent yesNoActive">@(d.Active ? "TAK" : "NIE")</div>
                        <div class="col-2 cent acent">@item.CaloriesSum</div>
                        <div class="col-4 cent acent">
                            @{
                                int i = 0;
                                string days = "";
                                if(d.Monday && d.Tuesday && d.Wednesday && d.Friday && d.Saturday && d.Sunday){
                                    days = "Pn - Nd";
                                }
                                else {
                                    if (d.Monday) { days += "Pn"; i++; }
                                    if (d.Tuesday) { days += i == 0 ?  "Wt" : ", Wt"; i++; }
                                    if (d.Wednesday) { days += i == 0 ? "Śr" : ", Śr"; i++; }
                                    if (d.Thursday) { days += i == 0 ? "Cz" : ", Cz"; i++; }
                                    if (d.Friday) { days += i == 0 ? "Pt" : ", Pt"; i++; }
                                    if (d.Saturday) { days += i == 0 ? "Sb" : ", Sb"; i++; }
                                    if (d.Sunday) { days += i == 0 ? "Nd" : ", Nd"; i++; }
                                }
                            }
                            @days
                        </div>
                    </div>
                    <div class="col-1 cent acent">
                        <a asp-action="EditDiet" asp-controller="DietCreator" asp-route-id="@d.DietId">
                            <img class="btnImg" src="~/img/pen.png" />
                        </a>
                    </div>
                    <div class="col-1 cent acent">
                        <img class="btnImg" src="https://cdn.onlinewebfonts.com/svg/img_416864.png" onclick="deleteDiet('@Url.Action("DeleteDiet", "DietCreator")', '@d.DietId')" />
                    </div>
                </div>
            }
        } else {
            <div class="row cent mt-5 ">
                <img src="~/img/not_found.png" style="width: 35px; height: 35px" />
                <div id="notfound">Nie stworzyłeś jeszcze żadnej diety</div>
            </div>
        }
    </div>
</body>
</html>